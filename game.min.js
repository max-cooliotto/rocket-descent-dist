var RKD={Games:{}};RKD.Games.RocketD={},RKD.Games.RocketD.Boot=function(t){},RKD.Games.RocketD.Boot.prototype={preload:function(){},create:function(){this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.minWidth=640,this.scale.minHeight=360,this.scale.maxWidth=1920,this.scale.maxHeight=1080,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.refresh()):(this.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.refresh()),this.game.playGameAudio=function(t,e,i){i=i||!1,e=e||1;var s=this.gameAudio.get(t);s.isPlaying||(i?s.fadeTo(500,e):this.gameAudio.play(t,e))},this.game.sound.stopGameAudio=function(t,e){if(null!=this.sprite){var i=this.sfx.indexOf(t);i>=0&&(this.sfx.splice(i,1),this.sprite.stop(t))}},this.game.sound.playMusic=function(t,e,i){if(null!=this.sprite&&this.music.indexOf(t)<0){this.music.push(t);var s=this.sprite.play(t,e);void 0!==i&&s.onMarkerComplete.addOnce(i,this)}},this.game.sound.stopMusic=function(t,e){if(null!=this.sprite){var i=this.music.indexOf(t);i>=0&&(this.music.splice(i,1),this.sprite.stop(t))}},this.state.start("Preloader")},update:function(){},render:function(){}},RKD.Games.RocketD.Preloader=function(t){},RKD.Games.RocketD.Preloader.prototype={preload:function(){this.game.load.image("rkd-logo","assets/image/rkd-logo-white.png"),this.game.load.image("rkd-logo-shadow","assets/image/rkd-logo-shadow.png"),this.game.load.image("rocket-large","assets/image/rocketship-large.png"),this.game.load.image("rocket","assets/image/rocketship.png"),this.game.load.image("exhaust-large","assets/image/exhaust-large.png"),this.game.load.image("exhaust","assets/image/exhaust.png"),this.game.load.image("cloud1","assets/image/cloud-01.png"),this.game.load.image("cloud2","assets/image/cloud-02.png"),this.game.load.image("cloud3","assets/image/cloud-03.png"),this.game.load.image("cloud4","assets/image/cloud-04.png"),this.game.load.image("mountain","assets/image/mountain.png"),this.game.load.image("fullscreen","assets/image/fullscreen.png"),this.game.load.image("key-left","assets/image/keyboard_key_left.png"),this.game.load.image("key-right","assets/image/keyboard_key_right.png"),this.game.load.image("key-up","assets/image/keyboard_key_up.png"),this.game.load.image("key-down","assets/image/keyboard_key_down.png"),this.game.load.image("key-shadow","assets/image/keyboard_key_shadow.png"),this.game.load.image("key-empty","assets/image/keyboard_key_empty.png"),this.game.load.image("checkmark","assets/image/checkmark.png"),this.game.load.image("indicator","assets/image/indicator.png"),this.game.load.spritesheet("checkbox","assets/image/checkbox.png",25,25),this.game.device.firefox||this.game.device.chrome||this.game.device.chromeOS?this.game.load.audiosprite("gameaudio","assets/audio/sprites/rocket-d-gameaudio.ogg","assets/audio/sprites/rocket-d-gameaudio.json"):this.game.load.audiosprite("gameaudio","assets/audio/sprites/rocket-d-gameaudio.mp3","assets/audio/sprites/rocket-d-gameaudio.json")},create:function(){this.game.gameAudio=this.add.audioSprite("gameaudio"),this.game.gameAudio.allowMultiple=!0,this.state.start("PreSplash")},update:function(){},render:function(){}},RKD.Games.RocketD.Tutorial=function(t){this.hideTutorial="true"==localStorage.getItem("hideTutorial")||!1,this.updateTime=0,this.calibrated=!1,this.cursors,this.KEY_SPACING=125,this.KEY_SHADOW_OFFSET=10,this.KEY_SIZE=100,this.KEY_PRESSED_SHADOW_OFFSET=7,this.KEY_PRESSED_OFFSET=3},RKD.Games.RocketD.Tutorial.prototype={init:function(){this.hideTutorial&&this.state.start("Game")},preload:function(){},create:function(){this.game.gameAudio.play("music-bg03-hard-loop",.5),this.game.camera.flash(0),this.cursors=this.input.keyboard.createCursorKeys(),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER);var t=this.game.add.bitmapData(this.game.width,this.game.height),e=t.context.createLinearGradient(0,0,0,this.game.height);e.addColorStop(0,"#000"),e.addColorStop(.75,"#0551ca"),e.addColorStop(1,"#007dc4"),t.context.fillStyle=e,t.context.fillRect(0,0,this.game.width,this.game.height),this.game.add.sprite(0,0,t),this.tutorialText=this.game.add.text(this.game.width/2,this.game.height-50,"Calibrating Thrusters...",{font:"Muli",fontSize:"36px",fill:"#FFF"}),this.tutorialText.padding.set(10),this.tutorialText.anchor.setTo(.5,.5),this.tutorialText.setShadow(5,5,"rgba(0,0,0,0.50)",5),this.checkbox=this.game.add.checkbox(this.game.width-300,20,{text:"show next time",style:{font:"Muli",fontSize:"18px",fill:"#fff"}},"checkbox",!this.hideTutorial),this.checkbox.events.onInputUp.add(function(t,e){localStorage.setItem("hideTutorial",!this.checkbox.state)},this),this.rocket=new RKD.Games.RocketD.Rocket(this.game,this.game.width/2-200,this.game.height/2,"demo"),this.rocket.cursors=this.cursors,this.game.world.add(this.rocket),this.rocketBlastOffTween=this.game.add.tween(this.rocket).to({y:0-this.rocket.height},1e3,Phaser.Easing.Cubic.In,!1),this.rocketBlastOffTween.onComplete.add(this.blastOffComplete,this);var i=this.game.add.group();this.keyLeftContainer=this.game.add.sprite(this.rocket.right,this.rocket.y),this.keyDownContainer=this.game.add.sprite(this.rocket.right+this.KEY_SPACING,this.rocket.y),this.keyRightContainer=this.game.add.sprite(this.rocket.right+2*this.KEY_SPACING,this.rocket.y),this.keyUpContainer=this.game.add.sprite(this.rocket.right+this.KEY_SPACING,this.rocket.y-this.KEY_SPACING),this.keyLeft=this.game.add.sprite(0,0,"key-left"),this.keyLeftShadow=this.game.add.sprite(this.KEY_SHADOW_OFFSET,this.KEY_SHADOW_OFFSET,"key-shadow"),this.keyLeftCheckmark=this.game.add.sprite(0,this.KEY_SIZE,"checkmark"),this.keyLeftCheckmark.anchor.setTo(0,1),this.keyLeftCheckmark.visible=!1,this.keyLeftCheckmark.scale=new Phaser.Point(3,3),this.keyLeftCheckmarkTween=this.game.add.tween(this.keyLeftCheckmark.scale).to({x:1,y:1},150,Phaser.Easing.Linear.None,!1),this.keyLeftContainer.addChild(this.keyLeftShadow),this.keyLeftContainer.addChild(this.keyLeft),this.keyLeftContainer.addChild(this.keyLeftCheckmark),this.keyDown=this.game.add.sprite(0,0,"key-down"),this.keyDownShadow=this.game.add.sprite(this.KEY_SHADOW_OFFSET,this.KEY_SHADOW_OFFSET,"key-shadow"),this.keyDownCheckmark=this.game.add.sprite(0,this.KEY_SIZE,"checkmark"),this.keyDownCheckmark.anchor.setTo(0,1),this.keyDownCheckmark.visible=!1,this.keyDownCheckmark.scale=new Phaser.Point(3,3),this.keyDownCheckmarkTween=this.game.add.tween(this.keyDownCheckmark.scale).to({x:1,y:1},150,Phaser.Easing.Linear.None,!1),this.keyDownContainer.addChild(this.keyDownShadow),this.keyDownContainer.addChild(this.keyDown),this.keyDownContainer.addChild(this.keyDownCheckmark),this.keyRight=this.game.add.sprite(0,0,"key-right"),this.keyRightShadow=this.game.add.sprite(this.KEY_SHADOW_OFFSET,this.KEY_SHADOW_OFFSET,"key-shadow"),this.keyRightCheckmark=this.game.add.sprite(0,this.KEY_SIZE,"checkmark"),this.keyRightCheckmark.anchor.setTo(0,1),this.keyRightCheckmark.visible=!1,this.keyRightCheckmark.scale=new Phaser.Point(3,3),this.keyRightCheckmarkTween=this.game.add.tween(this.keyRightCheckmark.scale).to({x:1,y:1},150,Phaser.Easing.Linear.None,!1),this.keyRightContainer.addChild(this.keyRightShadow),this.keyRightContainer.addChild(this.keyRight),this.keyRightContainer.addChild(this.keyRightCheckmark),this.keyUp=this.game.add.sprite(0,0,"key-up"),this.keyUpShadow=this.game.add.sprite(this.KEY_SHADOW_OFFSET,this.KEY_SHADOW_OFFSET,"key-shadow"),this.keyUpCheckmark=this.game.add.sprite(0,this.KEY_SIZE,"checkmark"),this.keyUpCheckmark.anchor.setTo(0,1),this.keyUpCheckmark.visible=!1,this.keyUpCheckmark.scale=new Phaser.Point(3,3),this.keyUpCheckmarkTween=this.game.add.tween(this.keyUpCheckmark.scale).to({x:1,y:1},150,Phaser.Easing.Linear.None,!1),this.keyUpContainer.addChild(this.keyUpShadow),this.keyUpContainer.addChild(this.keyUp),this.keyUpContainer.addChild(this.keyUpCheckmark),i.add(this.keyLeftContainer),i.add(this.keyDownContainer),i.add(this.keyRightContainer),i.add(this.keyUpContainer),i.x+=200},startGame:function(){this.game.state.start("Game")},blastOff:function(){var t=this.game.gameAudio.get("music-bg03-hard-loop");t.isPlaying&&t.fadeOut(),this.rocketBlastOffTween.start()},blastOffComplete:function(){this.rocket.destroy(),this.game.camera.fade(0),this.game.camera.onFadeComplete.add(this.startGame,this)},update:function(){this.updateKeySprites(),this.keyLeftCheckmark.visible&&this.keyDownCheckmark.visible&this.keyRightCheckmark.visible&&this.keyUpCheckmark.visible&&!this.calibrated&&(this.calibrated=!0,this.tutorialText.setText("All systems go!  Press enter to continue...")),this.calibrated&&this.enterKey.isDown&&this.blastOff()},updateKeySprites:function(){if(this.cursors.left.isDown){this.keyLeft.x=this.KEY_PRESSED_OFFSET,this.keyLeft.y=this.KEY_PRESSED_OFFSET,this.keyLeftShadow.x=this.KEY_PRESSED_SHADOW_OFFSET,this.keyLeftShadow.y=this.KEY_PRESSED_SHADOW_OFFSET,this.keyLeftCheckmarkTween.isPlaying||this.keyLeftCheckmarkTween.start(),this.keyLeftCheckmark.visible=!0;this.game.gameAudio.get("sfx-feedback-correct");this.keyLeftCheckedPlayed||(this.game.gameAudio.play("sfx-feedback-correct"),this.keyLeftCheckedPlayed=!0)}else this.keyLeft.x=0,this.keyLeft.y=0,this.keyLeftShadow.x=this.KEY_SHADOW_OFFSET,this.keyLeftShadow.y=this.KEY_SHADOW_OFFSET;if(this.cursors.down.isDown){this.keyDown.x=this.KEY_PRESSED_OFFSET,this.keyDown.y=this.KEY_PRESSED_OFFSET,this.keyDownShadow.x=this.KEY_PRESSED_SHADOW_OFFSET,this.keyDownShadow.y=this.KEY_PRESSED_SHADOW_OFFSET,this.keyDownCheckmark.visible=!0,this.keyDownCheckmarkTween.isPlaying||this.keyDownCheckmarkTween.start(),this.keyDownCheckmark.visible=!0;this.game.gameAudio.get("sfx-feedback-correct");this.keyDownCheckedPlayed||(this.game.gameAudio.play("sfx-feedback-correct"),this.keyDownCheckedPlayed=!0)}else this.keyDown.x=0,this.keyDown.y=0,this.keyDownShadow.x=this.KEY_SHADOW_OFFSET,this.keyDownShadow.y=this.KEY_SHADOW_OFFSET;if(this.cursors.right.isDown){this.keyRight.x=this.KEY_PRESSED_OFFSET,this.keyRight.y=this.KEY_PRESSED_OFFSET,this.keyRightShadow.x=this.KEY_PRESSED_SHADOW_OFFSET,this.keyRightShadow.y=this.KEY_PRESSED_SHADOW_OFFSET,this.keyRightCheckmark.visible=!0,this.keyRightCheckmarkTween.isPlaying||this.keyRightCheckmarkTween.start(),this.keyRightCheckmark.visible=!0;this.game.gameAudio.get("sfx-feedback-correct");this.keyRightCheckedPlayed||(this.game.gameAudio.play("sfx-feedback-correct"),this.keyRightCheckedPlayed=!0)}else this.keyRight.x=0,this.keyRight.y=0,this.keyRightShadow.x=this.KEY_SHADOW_OFFSET,this.keyRightShadow.y=this.KEY_SHADOW_OFFSET;if(this.cursors.up.isDown){this.keyUp.x=this.KEY_PRESSED_OFFSET,this.keyUp.y=this.KEY_PRESSED_OFFSET,this.keyUpShadow.x=this.KEY_PRESSED_SHADOW_OFFSET,this.keyUpShadow.y=this.KEY_PRESSED_SHADOW_OFFSET,this.keyUpCheckmark.visible=!0,this.keyUpCheckmarkTween.isPlaying||this.keyUpCheckmarkTween.start(),this.keyUpCheckmark.visible=!0;this.game.gameAudio.get("sfx-feedback-correct");this.keyUpCheckedPlayed||(this.game.gameAudio.play("sfx-feedback-correct"),this.keyUpCheckedPlayed=!0)}else this.keyUp.x=0,this.keyUp.y=0,this.keyUpShadow.x=this.KEY_SHADOW_OFFSET,this.keyUpShadow.y=this.KEY_SHADOW_OFFSET},render:function(){}},RKD.Games.RocketD.Rocket=function(t,e,i,s){return this.initialX=e,this.initialY=i,this.ROCKET_SCALE_DEMO=.5,this.ROCKET_SCALE_GAME=.2,this.ROCKET_ROTATION_RADIANS=5,this.SIDE_THRUST_FUELCONSUMPTION=1,this.HIGH_THRUST_FUELCONSUMPTION=5,this.LOW_THRUST_FUELCONSUMPTION=2,this.EXHAUST_LOW_SCALE=.75,this.EXHAUST_SIDE_SCALE=.5,this.EXHAUST_HIGH_SCALE=1,this.SPEED_WARNING_AMOUNT=400,this.FUEL_WARNING_AMOUNT=750,this.isDemo="demo"===s,this.alive=!0,this.game=t,Phaser.Sprite.call(this,t,0,0,"rocket-large",0),this.build(),this},RKD.Games.RocketD.Rocket.prototype=Object.create(Phaser.Sprite.prototype),RKD.Games.RocketD.Rocket.prototype.constructor=RKD.Games.RocketD.Rocket,RKD.Games.RocketD.Rocket.prototype.build=function(){this.events.onKilled.add(this.onKilledHandler,this),this.game.camera.follow(this),this.game.physics.enable(this,Phaser.Physics.ARCADE),this.anchor.setTo(.5,.5),this.exhaust=this.game.add.sprite(0,0,"exhaust-large"),this.exhaust.anchor.setTo(.5,0),this.exhaust.x=this.left+135+this.exhaust.width/2,this.exhaust.y=this.top+535,this.addChild(this.exhaust),this.isDemo?this.scale=new Phaser.Point(this.ROCKET_SCALE_DEMO,this.ROCKET_SCALE_DEMO):(this.scale=new Phaser.Point(this.ROCKET_SCALE_GAME,this.ROCKET_SCALE_GAME),this.maxHealth=7e3,this.maxFuel=2e3,this.setHealth(this.maxHealth),this.body.gravity.y=400,this.ExhaustHigh=1.75*this.body.gravity.y,this.ExhaustLow=.7*this.ExhaustHigh,this.SideExhaust=.5*this.ExhaustLow,this.body.collideWorldBounds=!0,this.body.maxVelocity=this.body.gravity.y,this.body.drag.x=.5*this.body.gravity.y,this.body.drag.y=.25*this.body.gravity.y,this.body.mass=10,this.body.bounce.y=.5),this.reset()},RKD.Games.RocketD.Rocket.prototype.onKilledHandler=function(){this.game.gameAudio.play("sfx-explosion"),this.handleTelemetrySounds()},RKD.Games.RocketD.Rocket.prototype.pause=function(){this.body.immovable=!0,this.body.enable=!1},RKD.Games.RocketD.Rocket.prototype.unpause=function(){this.body.immovable=!1,this.body.enable=!0},RKD.Games.RocketD.Rocket.prototype.reset=function(){this.isDemo?(this.x=this.initialX,this.y=this.initialY,this.rocketBounceTween=this.game.add.tween(this).to({y:this.y+3},200,Phaser.Easing.Bounce.InOut,!0,0,-1,!0)):(this.body.velocity=new Phaser.Point(0,0),this.revive(this.maxHealth),this.x=this.game.math.between(200,this.game.width-200),this.y=200,this.data.fuel=this.maxFuel,this.data.landed=!1)},RKD.Games.RocketD.Rocket.prototype.handleTelemetrySounds=function(){this.tooFast=this.game.gameAudio.get("sfx-telemetry-too-fast-loop"),this.lowFuel=this.game.gameAudio.get("sfx-telemetry-low-fuel-loop"),this.alive?(this.body.speed>this.SPEED_WARNING_AMOUNT&&!this.data.landed?this.tooFast.isPlaying||this.game.gameAudio.play("sfx-telemetry-too-fast-loop"):this.tooFast.isPlaying&&this.tooFast.stop(),this.data.fuel<this.FUEL_WARNING_AMOUNT&&!this.data.landed?this.lowFuel.isPlaying||(this.data.lowFuel=!0,this.game.gameAudio.play("sfx-telemetry-low-fuel-loop")):(this.data.lowFuel=!1,this.lowFuel.isPlaying&&this.lowFuel.stop())):(this.lowFuel.isPlaying&&this.lowFuel.stop(),this.tooFast.isPlaying&&this.tooFast.stop())},RKD.Games.RocketD.Rocket.prototype.handleExhaustSound=function(){if(this.exhaust.visible)if(this.exhaust.scale.x===this.EXHAUST_HIGH_SCALE)this.game.gameAudio.get("sfx-exhaust-high-loop").isPlaying||this.game.gameAudio.play("sfx-exhaust-high-loop",1),this.game.gameAudio.stop("sfx-exhaust-side-loop"),this.game.gameAudio.stop("sfx-exhaust-low-loop");else if(this.exhaust.scale.x===this.EXHAUST_SIDE_SCALE){this.game.gameAudio.get("sfx-exhaust-side-loop").isPlaying||this.game.gameAudio.play("sfx-exhaust-side-loop",1),this.game.gameAudio.stop("sfx-exhaust-high-loop"),this.game.gameAudio.stop("sfx-exhaust-low-loop")}else{this.game.gameAudio.get("sfx-exhaust-low-loop").isPlaying||this.game.gameAudio.play("sfx-exhaust-low-loop",1),this.game.gameAudio.stop("sfx-exhaust-side-loop"),this.game.gameAudio.stop("sfx-exhaust-high-loop")}else this.game.gameAudio.stop("sfx-exhaust-side-loop"),this.game.gameAudio.stop("sfx-exhaust-low-loop"),this.game.gameAudio.stop("sfx-exhaust-high-loop")},RKD.Games.RocketD.Rocket.prototype.thrustLeft=function(){this.exhaust.scale=new Phaser.Point(this.EXHAUST_SIDE_SCALE,this.EXHAUST_SIDE_SCALE),this.body.rotation=-this.ROCKET_ROTATION_RADIANS,this.exhaust.visible||(this.exhaust.visible=!0),this.isDemo||(this.body.acceleration.x-=this.SideExhaust,this.data.fuel-=this.SIDE_THRUST_FUELCONSUMPTION)},RKD.Games.RocketD.Rocket.prototype.thrustRight=function(){this.exhaust.scale=new Phaser.Point(this.EXHAUST_SIDE_SCALE,this.EXHAUST_SIDE_SCALE),this.body.rotation=this.ROCKET_ROTATION_RADIANS,this.exhaust.visible||(this.exhaust.visible=!0),this.isDemo||(this.body.acceleration.x+=this.SideExhaust,this.data.fuel-=this.SIDE_THRUST_FUELCONSUMPTION)},RKD.Games.RocketD.Rocket.prototype.thrustHigh=function(){this.exhaust.scale=new Phaser.Point(this.EXHAUST_HIGH_SCALE,this.EXHAUST_HIGH_SCALE),this.exhaust.visible||(this.exhaust.visible=!0),this.isDemo||(this.body.acceleration.y-=this.ExhaustHigh,this.data.fuel-=this.HIGH_THRUST_FUELCONSUMPTION)},RKD.Games.RocketD.Rocket.prototype.thrustLow=function(){this.exhaust.scale=new Phaser.Point(this.EXHAUST_LOW_SCALE,this.EXHAUST_LOW_SCALE),this.exhaust.visible||(this.exhaust.visible=!0),this.isDemo||(this.body.acceleration.y-=this.ExhaustLow,this.data.fuel-=this.LOW_THRUST_FUELCONSUMPTION)},RKD.Games.RocketD.Rocket.prototype.update=function(){this.exhaust.visible=!1,this.body.rotation=0,this.isDemo||(this.data.hasFuel=this.data.fuel>0,this.body.acceleration.x=0,this.body.acceleration.y=0,this.data.fuel<0&&(this.data.fuel=0)),this.alive&&!this.data.landed&&(this.isDemo||this.data.hasFuel)&&(this.cursors.left.isDown?this.thrustLeft():this.cursors.right.isDown&&this.thrustRight(),this.cursors.up.isDown?this.thrustHigh():this.cursors.down.isDown&&this.thrustLow()),this.handleExhaustSound(),this.handleTelemetrySounds()},RKD.Games.RocketD.PreSplash=function(t){this.updateTime=0},RKD.Games.RocketD.PreSplash.prototype={init:function(){},preload:function(){},toggleFullScreen:function(){this.game.scale.isFullScreen?this.game.scale.stopFullScreen():this.game.scale.startFullScreen()},create:function(){this.game.device.touch&&!this.game.device.desktop&&(this.game.add.button(this.game.width-180,this.game.height-110,"fullscreen",this.toggleFullScreen,this).fixedToCamera=!0);var t=this.game.add.bitmapData(this.game.width,this.game.height),e=t.context.createLinearGradient(0,0,0,this.game.height);e.addColorStop(0,"#000"),e.addColorStop(.75,"#0551ca"),e.addColorStop(1,"#007dc4"),t.context.fillStyle=e,t.context.fillRect(0,0,this.game.width,this.game.height),this.game.add.sprite(0,0,t);var i=this.game.width/2,s=this.game.height/2,a=this.game.device.desktop?"press enter or click to start...":"touch screen...",h=this.game.add.text(i,s,a,{font:"Muli",fontSize:"36px",fill:"#eee"});h.padding.set(10),h.anchor.setTo(.5,.5),h.setShadow(5,5,"rgba(0,0,0,0.50)",5),this.game.add.group().add(h),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.enterKey.onDown.addOnce(this.nextStage,this),this.game.input.onDown.addOnce(this.nextStage,this)},fadeComplete:function(){this.state.start("Splash")},nextStage:function(){var t=this.game.sound,e=t&&t.usingWebAudio?t.context:null;if(e&&"suspended"===e.state)try{var i=e.resume();if(i&&i.then)return void i.then(this._fadeToSplash.bind(this)).catch(this._fadeToSplash.bind(this))}catch(t){}this.game.camera.fade(),this.game.camera.onFadeComplete.addOnce(this.fadeComplete,this)},update:function(){void 0!==this.enterKey&&this.enterKey.isDown&&this.nextStage()},render:function(){}},RKD.Games.RocketD.Splash=function(t){this.sfxVolume=parseFloat(localStorage.getItem("sfxVolume"))||.5,this.musicVolume=parseFloat(localStorage.getItem("musicVolume"))||.5,this.hideTutorial="true"==localStorage.getItem("hideTutorial")||!1,this.updateTime=0},RKD.Games.RocketD.Splash.prototype={init:function(){},preload:function(){},toggleFullScreen:function(){this.game.scale.isFullScreen?this.game.scale.stopFullScreen():this.game.scale.startFullScreen()},create:function(){this.game.device.touch&&!this.game.device.desktop&&(this.game.add.button(this.game.width-180,this.game.height-110,"fullscreen",this.toggleFullScreen,this).fixedToCamera=!0);var t=this.game.add.bitmapData(this.game.width,this.game.height),e=t.context.createLinearGradient(0,0,0,this.game.height);e.addColorStop(0,"#000"),e.addColorStop(.75,"#0551ca"),e.addColorStop(1,"#007dc4"),t.context.fillStyle=e,t.context.fillRect(0,0,this.game.width,this.game.height),this.game.add.sprite(0,0,t);var i=this.game.add.sprite(this.game.width/2,this.game.height/2,"rkd-logo");i.anchor.setTo(.5,.5),i.scale=new Phaser.Point(.5,.5),i.alpha=0;var s=this.game.add.text(this.game.width/2,i.bottom+50,"presents...",{font:"Muli",fontSize:"36px",fill:"#FFF"});s.anchor.setTo(.5,.5),s.alpha=0;var a=this.game.add.group();a.add(i),a.add(s);var h=this.game.add.sprite(this.game.width/2,this.game.height/2-100,"rocket-large");h.anchor.setTo(.5,.5),h.scale=new Phaser.Point(.75,.75),h.rotation=.75,this.exhaust=this.game.add.sprite(0,315,"exhaust-large"),this.exhaust.anchor.setTo(.5,.5),this.exhaust.scale=new Phaser.Point(.75,.75),h.addChild(this.exhaust),this.animateExhaust=!0;var o=this.game.add.text(h.x,h.bottom+75,"ROCKET DESCENT",{font:"Muli",fontWeight:"bold",fontSize:"75px",fill:"#FFF"});o.padding.set(10),o.anchor.setTo(.5,.5),o.setShadow(5,5,"rgba(0,0,0,0.50)",5);var d=this.game.device.desktop?"press enter to start":"touch screen to start",n=this.game.add.text(h.x,h.bottom+150,d,{font:"Muli",fontSize:"36px",fill:"#eee"});n.padding.set(10),n.anchor.setTo(.5,.5),n.setShadow(5,5,"rgba(0,0,0,0.50)",5);var r=this.game.add.group();r.add(h),r.add(o),r.add(n),r.scale=new Phaser.Point(0,0);var l=this.game.add.tween(i).to({alpha:1},1e3,Phaser.Easing.Exponential.In,!1,1e3),g=this.game.add.tween(s).to({alpha:1},500,Phaser.Easing.Exponential.In),m=this.game.add.tween(a).to({alpha:0},2e3,Phaser.Easing.Exponential.In),c=this.game.add.tween(r.scale).to({x:1,y:1},1e3,Phaser.Easing.Exponential.In,!1,0,0,!1);c.onComplete.addOnce(this.flashScreen,this);this.game.add.tween(h).to({y:h.y+3},200,Phaser.Easing.Bounce.InOut,!0,0,-1,!0),this.game.add.tween(h).to({rotation:h.rotation+.112},1e3,Phaser.Easing.Cubic.InOut,!0,0,-1,!0),this.game.add.tween(n.scale).to({x:.95,y:.95},200,Phaser.Easing.Bounce.InOut,!0,0,-1,!0);l.chain(g),g.chain(m),m.chain(c),this.game.camera.flash(0),this.game.camera.onFlashComplete.addOnce(function(){this.playDanteSound(),l.start()},this)},playDanteSound:function(){this.game.gameAudio.get("sfx-dante-intro").isPlaying||this.game.gameAudio.play("sfx-dante-intro")},flashScreen:function(){this.game.gameAudio.get("music-bg-hard-loop").isPlaying||this.game.gameAudio.play("music-bg-hard-loop"),this.game.camera.flash(16777215),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER)},fadeComplete:function(){this.state.start("Tutorial")},nextStage:function(){var t=this.game.gameAudio.get("music-bg-hard-loop");t.isPlaying&&t.fadeOut(450),this.game.camera.fade(),this.game.camera.onFadeComplete.addOnce(this.fadeComplete,this)},update:function(){void 0!==this.enterKey&&this.enterKey.isDown&&this.nextStage(),!0===this.animateExhaust&&this.game.time.now>this.updateTime&&(this.exhaust.visible=Math.random()>.5,this.updateTime=this.game.time.now+150)},render:function(){}},RKD.Games.RocketD.Cloud=function(t,e,i,s,a){return this.initialPositionX=i,this.initialPositionY=s<300?s=300:s>parseInt(t.world.height/1.5)?parseInt(t.world.height/1.5):s,this.alive=!0,this.speed=a,this.game=t,Phaser.Sprite.call(this,t,this.initialPositionX,this.initialPositionY,e,0),this.build(),this},RKD.Games.RocketD.Cloud.prototype=Object.create(Phaser.Sprite.prototype),RKD.Games.RocketD.Cloud.prototype.constructor=RKD.Games.RocketD.Cloud,RKD.Games.RocketD.Cloud.prototype.build=function(){this.game.physics.enable(this,Phaser.Physics.ARCADE),this.body.velocity.x=this.speed},RKD.Games.RocketD.Cloud.prototype.pause=function(){this.body.immovable=!0,this.body.enable=!1},RKD.Games.RocketD.Cloud.prototype.unpause=function(){this.body.immovable=!1,this.body.enable=!0},RKD.Games.RocketD.Cloud.prototype.update=function(){this.body.x>this.game.world.width&&(this.body.x=-this.width)},RKD.Games.RocketD.Game=function(t){this.cursors,this.clouds,this.damageThreshold=700,this.gameStop,this.applausePlayed=!1,this.gaspPlayed=!1,this.fuel,this.player,this.exhaust,this.exhaustLowTween,this.exhaustHighTween,this.exhauster,this.playerSideExhaust,this.playerExhaustHigh,this.playerExhaustLow,this.platforms,this.hitPlatform,this.restartText,this.debugActive=window.location.href.indexOf("debug")>=0,this.gameAudio,this.sfxPlaying=[],this.musicPlaying=[],this.gameWidth,this.worldHeight,this.gameHeight,this.updateTime=0},RKD.Games.RocketD.Game.prototype={preload:function(){},create:function(){(this.cursors=this.input.keyboard.createCursorKeys(),this.game.camera.flash(0),this.createWorld(),this.createFrontClouds(),this.createLandingPad(),this.createPlayer(),this.createHUD(),this.createBackgroundMusic(),this.cursors=this.input.keyboard.createCursorKeys(),this.game.device.touch&&!this.game.device.desktop)&&(this.game.add.button(this.game.width-180,this.game.height-110,"fullscreen",this.toggleFullScreen,this).fixedToCamera=!0);this.resetGame()},toggleFullScreen:function(){this.scale.isFullScreen?this.scale.stopFullScreen():this.scale.startFullScreen()},createBackgroundMusic:function(){this.mainLoop=this.game.gameAudio.get("music-bg02-main-loop"),this.winLoop=this.game.gameAudio.get("music-bg02-hard-loop"),this.loseLoop=this.game.gameAudio.get("music-bg02-soft-loop"),this.game.gameAudio.play("music-bg02-main-loop"),this.game.gameAudio.play("music-bg02-hard-loop"),this.game.gameAudio.play("music-bg02-soft-loop")},playBGMLoop:function(t){switch(t){case"game":this.mainLoop&&!0===this.mainLoop.mute&&(this.mainLoop.mute=!1),this.loseLoop&&!1===this.loseLoop.mute&&(this.loseLoop.mute=!0),this.winLoop&&!1===this.winLoop.mute&&(this.winLoop.mute=!0);break;case"win":this.mainLoop&&!1===this.mainLoop.mute&&(this.mainLoop.mute=!0),this.loseLoop&&!1===this.loseLoop.mute&&(this.loseLoop.mute=!0),this.winLoop&&!0===this.winLoop.mute&&(this.winLoop.mute=!1);break;case"lose":this.mainLoop&&!1===this.mainLoop.mute&&(this.mainLoop.mute=!0),this.loseLoop&&!0===this.loseLoop.mute&&(this.loseLoop.mute=!1),this.winLoop&&!1===this.winLoop.mute&&(this.winLoop.mute=!0);break;case"":this.mainLoop&&!1===this.mainLoop.mute&&(this.mainLoop.mute=!0),this.loseLoop&&!1===this.loseLoop.mute&&(this.loseLoop.mute=!0),this.winLoop&&!1===this.winLoop.mute&&(this.winLoop.mute=!0)}},createHUD:function(){this.healthText=this.add.text(50,16,"health: "+this.player.health,{font:"32px Muli",fill:"#FFF"}),this.healthText.padding.set(10),this.healthText.setShadow(5,5,"rgba(0,0,0,0.50)",5),this.fuelText=this.add.text(this.game.width-200,16,"fuel: "+this.player.data.fuel,{font:"32px Muli",fill:"#FFF"}),this.fuelText.padding.set(10),this.fuelText.setShadow(5,5,"rgba(0,0,0,0.50)",5),this.createLowFuelFlashingTween();var t=this.game.add.bitmapData(this.game.width-100,this.game.height-100);t.context.fillStyle="rgba(0,0,0,.5)",t.context.fillRect(0,0,this.game.width-100,this.game.height-100),this.finishedBackground=this.game.add.sprite(this.game.width/2,this.game.height/2,t),this.finishedBackground.scale=new Phaser.Point(0,0),this.finishedBackground.anchor.setTo(.5,.5),this.finishedBackground.fixedToCamera=!0,this.finishedBackgroundTweenIn=this.game.add.tween(this.finishedBackground.scale).to({x:1,y:1},250,Phaser.Easing.Cubic.In,!1),this.finishedBackgroundTweenOut=this.game.add.tween(this.finishedBackground.scale).to({x:0,y:0},250,Phaser.Easing.Cubic.In,!1),this.finishedBackgroundTweenOut.onComplete.add(this.resetGame,this),this.restartText=this.add.text(0,0,"Press enter to try again",{font:"Muli",boundsAlignV:"middle",boundsAlignH:"center",fontSize:"5.25em",fill:"#FFF"}),this.restartText.anchor.setTo(.5,.5),this.restartText.padding.set(10),this.restartText.setShadow(5,5,"rgba(0,0,0,0.50)",5),this.healthText.fixedToCamera=!0,this.fuelText.fixedToCamera=!0,this.finishedBackground.addChild(this.restartText)},createLowFuelFlashingTween:function(){this.lowFuelFlashingTween=this.game.add.tween(this.fuelText).to({alpha:.25},150,Phaser.Easing.Exponential.InOut,!1,0,-1,!0)},createLandingPad:function(){var t=this.add.bitmapData(this.math.between(100,200),15);t.context.fillStyle="#000",t.context.fillRect(0,0,t.width,t.height),this.landingPad&&this.landingPad.destroy(),this.landingPad=this.platforms.create(this.math.between(0,this.world.width-t.width),this.math.between(this.world.height-400,this.world.height-100),t),this.landingPad.body.immovable=!0,this.landingPad.anchor.setTo(.5,0)},createPlayer:function(){this.player=new RKD.Games.RocketD.Rocket(this.game,this.game.width/2-200,this.game.height/2,"game"),this.indicator=this.game.add.sprite(0,0,"indicator"),this.indicator.alpha=1,this.game.add.tween(this.indicator).to({alpha:.5},150,Phaser.Easing.Exponential.InOut,!0,0,-1,!0),this.indicator.anchor.setTo(.5,.5),this.indicator.pivot=new PIXI.Point(500,0),this.player.addChild(this.indicator),this.player.cursors=this.cursors,this.game.world.add(this.player)},createFrontClouds:function(){this.frontClouds=this.game.add.group();for(var t=1;t<=15;t++)this.frontClouds.add(new RKD.Games.RocketD.Cloud(this.game,"cloud"+this.game.math.between(1,4).toString(),this.game.world.randomX,this.game.math.between(parseInt(this.game.world.height/10),parseInt(this.game.world.height/1.5)),this.game.math.between(50,150)))},createWorld:function(){this.game.stage.backgroundColor="#eee",this.world.setBounds(0,0,2560,1440);var t=this.add.bitmapData(this.world.width,this.world.height),e=t.context.createLinearGradient(0,0,0,this.world.height);e.addColorStop(0,"#000"),e.addColorStop(.75,"#0551ca"),e.addColorStop(1,"#007dc4"),t.context.fillStyle=e,t.context.fillRect(0,0,this.world.width,this.world.height),this.add.sprite(0,0,t),this.physics.startSystem(Phaser.Physics.ARCADE);this.add.image(-150,this.world.height-526,"mountain");this.platforms=this.add.group(),this.platforms.enableBody=!0;var i=this.add.bitmapData(this.world.width,25);i.context.fillStyle="#090",i.context.fillRect(0,0,i.width,i.height),this.platforms.create(0,this.world.height-25,i).body.immovable=!0,this.clouds=this.game.add.group();for(var s=1;s<=15;s++)this.clouds.add(new RKD.Games.RocketD.Cloud(this.game,"cloud"+parseInt(4*Math.random()+1).toString(),this.game.world.randomX,this.game.math.between(parseInt(this.game.world.height/10),parseInt(this.game.world.height/1.5)),this.game.math.between(50,150)))},updateCollisions:function(){this.hitPlatform=this.physics.arcade.collide(this.player,this.platforms,this.playerHitPlatform,null,this)},playerHitPlatform:function(t,e){if(t.alive&&!t.data.landed){t.body.speed>75&&this.game.gameAudio.play("sfx-crash");var i=t.body.speed*t.body.mass;i>this.damageThreshold&&(t.damage(i),t.health<0&&t.setHealth(0)),t.data.landed=t.alive&&t.body.speed<=10,this.camera.shake(i/5e5,150,!1,Phaser.Camera.SHAKE_VERTICAL,!0)}},update:function(){(this.updateCollisions(),this.updateScoreboard(),!this.player.alive|this.player.data.landed)?(this.player.alive?this.player.data.landed&&(this.playBGMLoop("win"),this.applause=this.game.gameAudio.get("sfx-crowd-applause"),this.applause.isPlaying||this.applausePlayed||(this.applausePlayed=!0,this.game.gameAudio.play("sfx-crowd-applause"))):(this.playBGMLoop("lose"),this.gasp=this.game.gameAudio.get("sfx-crowd-gasp"),this.gasp.isPlaying||this.gaspPlayed||(this.gaspPlayed=!0,this.game.gameAudio.play("sfx-crowd-gasp"))),1==!this.finishedBackground.scale.x?this.finishedBackgroundTweenIn.start():(this.input.keyboard.isDown(Phaser.KeyCode.ENTER)||this.input.activePointer.isDown)&&(this.finishedBackgroundTweenOut.isRunning||this.finishedBackgroundTweenOut.start())):(this.indicator.visible=this.game.physics.arcade.distanceBetween(this.landingPad,this.player,this.world)>400,this.indicator.rotation=this.game.physics.arcade.angleBetween(this.landingPad,this.indicator,this.world),this.player.data.lowFuel&!this.lowFuelFlashingTween.isPlaying&&this.lowFuelFlashingTween.start())},render:function(){this.debugActive&&this.game.debug.text("Distance From Platform: "+this.game.physics.arcade.distanceBetween(this.landingPad,this.player,this.world),50,50)},postUpdate:function(){},resetGame:function(){this.fuelText.alpha=1,this.lowFuelFlashingTween.stop(),this.createLowFuelFlashingTween(),this.createLandingPad(),void 0!==this.gasp&&this.gasp.isPlaying&&this.gasp.stop(),void 0!==this.applause&&this.applause.isPlaying&&this.applause.stop(),this.applausePlayed=!1,this.gaspPlayed=!1,this.playBGMLoop("game"),this.player.reset(),this.player.data.needToResetFuel=!0},updateScoreboard:function(){this.fuelText.text="Fuel: "+parseInt(this.player.data.fuel/this.player.maxFuel*100),this.healthText.text="Health: "+parseInt(this.player.health/this.player.maxHealth*100)}};